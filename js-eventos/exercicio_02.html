<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ex 02</title>
</head>
<body>
    <h1>Exercicio 02 - Eventos</h1>
    <p>Num textarea com um número máximo de caracteres permitidos, mostrar numa span o número de caracteres restantes e indicar pro usuário quando restam apenas 10 caracteres.</p>
    <hr>
    <textarea id="msg" cols="50" rows="20" maxlength="100" ></textarea>
    <p style="display: none" id="textoDoContador">Restam <span id="contador">xx</span> caractes</p>
</body>
<script>

    (function(){
        'use strict';

        var $areaConteudo = document.querySelector('#msg');
        var $textoDoContador = document.querySelector('#textoDoContador');
        var $contador = document.querySelector('#contador');

        //Se o JS estiver habilitado o contador é exibido.
        $textoDoContador.style.display = 'block';

        var caracteresMaximo = $areaConteudo.maxLength;

        atualizarContador();

        $areaConteudo.addEventListener('input', contarCaracters);

        function contarCaracters(e){
            var quantidadeDigitada = this.value.length;
            atualizarContador(quantidadeDigitada);
            
        }
        
        function atualizarContador(quantidade){
            if(quantidade){
                $contador.textContent = caracteresMaximo - quantidade;
            } else {
                $contador.textContent = caracteresMaximo
            }
        }

    })()

</script>
</html>